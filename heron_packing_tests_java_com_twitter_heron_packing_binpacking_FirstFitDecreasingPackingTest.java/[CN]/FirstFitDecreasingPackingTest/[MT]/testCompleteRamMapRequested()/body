{
  int spoutParallelism=4;
  int boltParallelism=3;
  int totalInstances=spoutParallelism + boltParallelism;
  com.twitter.heron.api.Config topologyConfig=new com.twitter.heron.api.Config();
  long maxContainerRam=15L * Constants.GB;
  long maxContainerDisk=20L * Constants.GB;
  float maxContainerCpu=30;
  long boltRam=1L * Constants.GB;
  long spoutRam=2L * Constants.GB;
  topologyConfig.setContainerMaxRamHint(maxContainerRam);
  topologyConfig.setContainerMaxDiskHint(maxContainerDisk);
  topologyConfig.setContainerMaxCpuHint(maxContainerCpu);
  topologyConfig.setComponentRam(BOLT_NAME,boltRam);
  topologyConfig.setComponentRam(SPOUT_NAME,spoutRam);
  TopologyAPI.Topology topologyExplicitRamMap=getTopology(spoutParallelism,boltParallelism,topologyConfig);
  PackingPlan packingPlanExplicitRamMap=getFirstFitDecreasingPackingPlan(topologyExplicitRamMap);
  Assert.assertEquals(packingPlanExplicitRamMap.getContainers().size(),1);
  Assert.assertEquals(Math.round(totalInstances * instanceCpuDefault + DEFAULT_CONTAINER_PADDING / 100.0 * (totalInstances * instanceCpuDefault) + instanceCpuDefault),(long)packingPlanExplicitRamMap.getResource().getCpu());
  Assert.assertEquals(spoutParallelism * spoutRam + boltParallelism * boltRam + (long)(DEFAULT_CONTAINER_PADDING / 100.0 * (spoutParallelism * spoutRam + boltParallelism * boltRam)) + instanceRamDefault,packingPlanExplicitRamMap.getResource().getRam());
  Assert.assertEquals(totalInstances * instanceDiskDefault + (long)(DEFAULT_CONTAINER_PADDING / 100.0 * (totalInstances * instanceDiskDefault)) + instanceDiskDefault,packingPlanExplicitRamMap.getResource().getDisk());
  for (  PackingPlan.ContainerPlan containerPlan : packingPlanExplicitRamMap.getContainers()) {
    Assert.assertNotEquals(maxContainerRam,containerPlan.getResource().getRam());
    for (    PackingPlan.InstancePlan instancePlan : containerPlan.getInstances()) {
      if (instancePlan.getComponentName().equals(BOLT_NAME)) {
        Assert.assertEquals(boltRam,instancePlan.getResource().getRam());
      }
      if (instancePlan.getComponentName().equals(SPOUT_NAME)) {
        Assert.assertEquals(spoutRam,instancePlan.getResource().getRam());
      }
    }
  }
}
