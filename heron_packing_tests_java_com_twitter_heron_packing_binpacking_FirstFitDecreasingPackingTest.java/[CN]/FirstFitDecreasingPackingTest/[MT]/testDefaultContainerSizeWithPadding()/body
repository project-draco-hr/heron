{
  int spoutParallelism=4;
  int boltParallelism=3;
  int padding=50;
  int totalInstances=spoutParallelism + boltParallelism;
  com.twitter.heron.api.Config topologyConfig=new com.twitter.heron.api.Config();
  topologyConfig.setContainerPaddingPercentage(padding);
  TopologyAPI.Topology topology=getTopology(spoutParallelism,boltParallelism,topologyConfig);
  PackingPlan packingPlan=getFirstFitDecreasingPackingPlan(topology);
  Assert.assertEquals(packingPlan.containers.size(),2);
  long totalRam=(totalInstances + HERON_INTERNAL_CONTAINERS) * instanceRamDefault + ((long)(padding / 100.0 * totalInstances * instanceRamDefault));
  Assert.assertEquals(packingPlan.resource.ram,totalRam);
  double totalCpu=Math.round(spoutParallelism * instanceCpuDefault + (padding / 100.0 * spoutParallelism * instanceCpuDefault)) + Math.round(boltParallelism * instanceCpuDefault + (padding / 100.0 * boltParallelism * instanceCpuDefault)) + instanceCpuDefault;
  Assert.assertEquals((long)packingPlan.resource.cpu,(long)totalCpu);
  long totalDisk=(totalInstances + HERON_INTERNAL_CONTAINERS) * instanceDiskDefault + (long)(padding / 100.0 * totalInstances * instanceDiskDefault);
  Assert.assertEquals(packingPlan.resource.disk,totalDisk);
}
