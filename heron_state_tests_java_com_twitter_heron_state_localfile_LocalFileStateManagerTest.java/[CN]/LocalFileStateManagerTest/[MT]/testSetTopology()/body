{
  TopologyAPI.Topology topology=TopologyAPI.Topology.getDefaultInstance();
  LocalFileStateManager manager=Mockito.spy(new LocalFileStateManager());
  manager.initialize(getConf());
  PowerMockito.spy(FileUtility.class);
  PowerMockito.doReturn(true).when(FileUtility.class,"createDirectory",Matchers.anyString());
  Assert.assertTrue(manager.initTree());
  PowerMockito.doReturn(true).when(FileUtility.class,"writeToFile",Matchers.anyString(),Matchers.any(byte[].class));
  Assert.assertTrue(manager.setTopology(topology,topologyName).get());
  PowerMockito.verifyStatic();
  FileUtility.writeToFile(Matchers.eq(String.format("%s/%s/%s",rootAddr,"topologies",topologyName)),Matchers.eq(topology.toByteArray()));
}
