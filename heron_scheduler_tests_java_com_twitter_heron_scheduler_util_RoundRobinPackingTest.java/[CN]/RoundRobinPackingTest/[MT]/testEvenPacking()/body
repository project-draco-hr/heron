{
  int numContainer=2;
  int componentParallelism=4;
  RoundRobinPacking packing=RoundRobinPacking.class.newInstance();
  Config topologyConfig=new Config();
  topologyConfig.put(Config.TOPOLOGY_STMGRS,numContainer);
  Map<String,Integer> spouts=new HashMap<>();
  spouts.put("spout",componentParallelism);
  Map<String,Integer> bolts=new HashMap<>();
  bolts.put("bolt",componentParallelism);
  TopologyAPI.Topology topology=TopologyUtilityTest.createTopology("testTopology",topologyConfig,spouts,bolts);
  int numInstance=TopologyUtility.getTotalInstance(topology);
  Assert.assertEquals((spouts.size() + bolts.size()) * componentParallelism,numInstance);
  DefaultConfigLoader configLoader=DefaultConfigLoader.class.newInstance();
  configLoader.load("","");
  LaunchContext context=new LaunchContext(configLoader,topology);
  PackingPlan output=packing.pack(context);
  Assert.assertEquals(numContainer,output.containers.size());
  for (  PackingPlan.ContainerPlan container : output.containers.values()) {
    Assert.assertEquals(numInstance / numContainer,container.instances.size());
    Assert.assertEquals(2,countCompoment("spout",container.instances,packing));
    Assert.assertEquals(2,countCompoment("bolt",container.instances,packing));
  }
}
