{
  String auroraFilename="file.aurora";
  Map<String,String> bindings=new HashMap<>();
  List<String> expectedCommand=new ArrayList<>(Arrays.asList("aurora","job","create","--wait-until","RUNNING",String.format("%s/%s/%s/%s",CLUSTER,ROLE,ENV,JOB_NAME),auroraFilename,VERBOSE_CONFIG));
  Mockito.doReturn(false).when(controller).runProcess(Matchers.anyListOf(String.class));
  Assert.assertFalse(controller.createJob(auroraFilename,bindings));
  Mockito.verify(controller).runProcess(Mockito.eq(expectedCommand));
  Mockito.doReturn(true).when(controller).runProcess(Matchers.anyListOf(String.class));
  Assert.assertTrue(controller.createJob(auroraFilename,bindings));
  Mockito.verify(controller,Mockito.times(2)).runProcess(expectedCommand);
}
