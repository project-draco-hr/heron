{
  PhysicalPlans.PhysicalPlan.Builder pPlan=PhysicalPlans.PhysicalPlan.newBuilder();
  TopologyBuilder topologyBuilder=new TopologyBuilder();
  topologyBuilder.setSpout("test-spout",new TestSpout(),1);
  topologyBuilder.setBolt("test-bolt",new TestBolt(),1).customGrouping("test-spout",myCustomGrouping);
  Config conf=new Config();
  conf.setTeamEmail("streaming-compute@twitter.com");
  conf.setTeamName("stream-computing");
  conf.setTopologyProjectName("heron-integration-test");
  conf.setNumStmgrs(1);
  conf.setMaxSpoutPending(100);
  conf.setEnableAcking(false);
  TopologyAPI.Topology fTopology=topologyBuilder.createTopology().setName("topology-name").setConfig(conf).setState(TopologyAPI.TopologyState.RUNNING).getTopology();
  pPlan.setTopology(fTopology);
  PhysicalPlans.InstanceInfo.Builder spoutInstanceInfo=PhysicalPlans.InstanceInfo.newBuilder();
  spoutInstanceInfo.setComponentName("test-spout");
  spoutInstanceInfo.setTaskId(0);
  spoutInstanceInfo.setComponentIndex(0);
  PhysicalPlans.Instance.Builder spoutInstance=PhysicalPlans.Instance.newBuilder();
  spoutInstance.setInstanceId("spout-id");
  spoutInstance.setStmgrId("stream-manager-id");
  spoutInstance.setInfo(spoutInstanceInfo);
  PhysicalPlans.InstanceInfo.Builder boltInstanceInfo=PhysicalPlans.InstanceInfo.newBuilder();
  boltInstanceInfo.setComponentName("test-bolt");
  boltInstanceInfo.setTaskId(1);
  boltInstanceInfo.setComponentIndex(0);
  PhysicalPlans.Instance.Builder boltInstance=PhysicalPlans.Instance.newBuilder();
  boltInstance.setInstanceId("bolt-id");
  boltInstance.setStmgrId("stream-manager-id");
  boltInstance.setInfo(boltInstanceInfo);
  pPlan.addInstances(spoutInstance);
  pPlan.addInstances(boltInstance);
  PhysicalPlans.StMgr.Builder stmgr=PhysicalPlans.StMgr.newBuilder();
  stmgr.setId("stream-manager-id");
  stmgr.setHostName("127.0.0.1");
  stmgr.setDataPort(8888);
  stmgr.setLocalEndpoint("endpoint");
  pPlan.addStmgrs(stmgr);
  return pPlan.build();
}
