def main():
    check_environment()
    parser = create_parser()
    if (len(sys.argv[1:]) == 0):
        parser.print_help()
        return 0
    sys.argv = parse.insert_bool_values(sys.argv)
    (args, unknown_args) = parser.parse_known_args()
    namespace = vars(args)
    try:
        if namespace['verbose']:
            opts.set_verbose()
        if namespace['trace_execution']:
            opts.set_trace_execution()
    except:
        pass
    atexit.register(cleanup)
    command = namespace['subcommand']
    start = time.time()
    retcode = run(command, parser, namespace, unknown_args)
    end = time.time()
    if (command != 'help'):
        sys.stdout.flush()
        Log.info(('Elapsed time: %.3fs.' % (end - start)))
    return (0 if (retcode == True) else 1)
