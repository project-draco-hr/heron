{
  StringBuilder pStdOut=stdout;
  StringBuilder pStdErr=stderr;
  try {
    if (verbose) {
      LOG.info("$> " + Arrays.toString(cmdline));
    }
    Process process=getProcessBuilder(isInheritIO,cmdline,workingDirectory).start();
    int exitValue=process.waitFor();
    if (pStdOut == null) {
      pStdOut=new StringBuilder();
    }
    if (pStdErr == null) {
      pStdErr=new StringBuilder();
    }
    pStdOut.append(inputstreamToString(process.getInputStream()));
    pStdErr.append(inputstreamToString(process.getErrorStream()));
    if (verbose) {
      LOG.info(pStdOut.toString());
      LOG.info(pStdErr.toString());
    }
    return exitValue;
  }
 catch (  IOException|InterruptedException e) {
    LOG.severe("Failed to check status of packer " + e);
  }
  return -1;
}
