def test_update_count(self):
    self.metrics_helper.update_count('metric1')
    self.assertEqual(self.metrics['metric1'].get_value_and_reset(), 1)
    self.assertEqual(self.metrics['metric1'].get_value_and_reset(), 0)
    self.metrics_helper.update_count('metric1', incr_by=10)
    self.assertEqual(self.metrics['metric1'].get_value_and_reset(), 10)
    self.metrics_helper.update_count('metric2', key='key1')
    self.assertEqual(self.metrics['metric2'].get_value_and_reset(), {'key1': 1, })
    self.assertEqual(self.metrics['metric2'].get_value_and_reset(), {'key1': 0, })
    self.metrics_helper.update_count('metric2', incr_by=10, key='key2')
    self.assertEqual(self.metrics['metric2'].get_value_and_reset(), {'key1': 0, 'key2': 10, })
